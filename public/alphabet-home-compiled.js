"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),template=document.createElement("template");template.innerHTML='\n<style>\n  :host {\n    display: block;\n  }\n  .header {\n    height: 350px;\n    overflow: hidden;\n  }\n  h1 {\n    letter-spacing: 2px;\n    font-weight: 500;\n  }\n  p {\n    font-weight: 300;\n    font-size: 18px;\n  }\n  .maintitle {\n    font-size: 4.2em;\n    color: #6b8e23;\n  }\n  .footer {\n    font-size: 13px;\n  }\n  a:link, a:visited {\n    color: #6b8e23;\n    text-decoration: none;\n  }\n  a:hover {\n    text-decoration: underline;\n  }\n  .signin-view {\n    padding-top: 10%;\n    max-width: 400px;\n    margin: auto;\n    text-align: center;\n    display: block;\n  }\n  .btn {\n      box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n      transition: all 0.3s cubic-bezier(.25,.8,.25,1);\n      border-color: #6b8e23;\n      border-radius: 2px;\n      height: 2.25rem;\n      background-color: #6b8e23;\n      color: white;\n      cursor: pointer;\n      margin: 0.5rem;\n  }\n  .btn:hover {\n      box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\n  }\n  button.secondary {\n    background-color: #585858;\n    border-color: #585858;\n    float: right;\n  }\n  button.primary {\n    float: right;\n  }\n  #logout {\n    position: fixed;\n    top: 0;\n    right: 0;\n    font-size: 0.9rem;\n    margin: 1.25rem 1rem 0 0;\n    cursor: pointer;\n  }\n\n  .letter {\n    position: relative;\n    margin: auto;\n    height: 5rem;\n    font-size: 5rem;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    text-align: center;\n    vertical-align: middle;\n    line-height: 5rem;\n    z-index: 5;\n    cursor: pointer;\n  }\n\n  </style>\n\n  <div class="signin-view" id="signin">\n    <div class="header">\n        <div class="maintitle">Ellie\'s Alphabet</div>\n        <p role="main">A simple game to help my daughter learn her alphabet letters</p>\n        <br/>\n        <button id="googlelogin" class="btn">Sign in with Google</button>\n    </div>\n    <p class="footer">Created by <a href="https://twitter.com/jeffdaube">Jeffrey B. Daube</a>.\n    Find this on <a href="https://github.com/daubejb/ellies_alphabet">GitHub</a>.</p>\n  </div>\n  <div id="home" style="display:none;">\n    <daube-header-fixed headertitle="Ellie\'s Alphabet">\n      <span id="logout">LOGOUT</span>\n    </daube-header-fixed>\n    <daube-main-container>\n      <daube-card id="topcard">\n        <div id="topletter" class="letter">A</div>\n      </daube-card>\n      <daube-card id="middlecard">\n        <div id="middleletter" class="letter">B</div>\n      </daube-card>\n      <daube-card id="bottomcard">\n        <div id="bottomletter" class="letter">C</div>\n      </daube-card>\n    </daube-main-container>\n  </div>\n',window.ShadyCSS&&ShadyCSS.prepareTemplate(template,"alphabet-home");var AlphabetHome=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.attachShadow({mode:"open"}),e.shadowRoot.appendChild(template.content.cloneNode(!0)),e.shadowRoot.querySelector("#googlelogin").addEventListener("click",function(t){console.log("login button clicked"),e.googleLogin()}),e.shadowRoot.querySelector("#logout").addEventListener("click",function(t){console.log("login button clicked"),e.googleLogout()}),e}return _inherits(t,HTMLElement),_createClass(t,null,[{key:"observedAttributes",get:function(){}}]),_createClass(t,[{key:"connectedCallback",value:function(){window.ShadyCSS&&ShadyCSS.styleElement(this);var e=this.shadowRoot.querySelector("#signin"),t=this.shadowRoot.querySelector("#home");firebase.auth().onAuthStateChanged(function(o){o?(e.style.display="none",t.style.display="block"):(console.log("user is not authenticated"),e.style.display="block",t.style.display="none")});var o=this.getRandLetters();console.log(o);var n=this.shadowRoot.querySelector("#topletter"),r=this.shadowRoot.querySelector("#middleletter"),i=this.shadowRoot.querySelector("#bottomletter");n.innerHTML=o.top,r.innerHTML=o.middle,i.innerHTML=o.bottom;var a=new Audio("./audio/"+o.top+".mp3"),l=new Audio("./audio/"+o.middle+".mp3"),c=new Audio("./audio/"+o.bottom+".mp3"),s="";switch(o.selection){case"top":s=o.top;break;case"middle":s=o.middle;break;case"bottom":s=o.bottom}new Audio("./audio/Where_is_the_letter_"+s+".mp3").play();var d=this;n.addEventListener("click",function(e){console.log("event details",e),console.log("top letter clicked"),a.play(),setTimeout(function(){d.evaluateClick(o,"top")},1e3)}),r.addEventListener("click",function(e){console.log("middle letter clicked"),l.play(),setTimeout(function(){d.evaluateClick(o,"middle")},1e3)}),i.addEventListener("click",function(e){console.log("bottom letter clicked"),c.play(),setTimeout(function(){d.evaluateClick(o,"bottom")},1e3)})}},{key:"googleLogin",value:function(){var e=new firebase.auth.GoogleAuthProvider;firebase.auth().signInWithPopup(e).then(function(e){e.credential.accessToken,e.user}).catch(function(e){e.code,e.message,e.email,e.credential})}},{key:"googleLogout",value:function(){console.log("User requested to log out"),firebase.auth().signOut().then(function(){console.log("User logged out")}).catch(function(e){console.log("Error occured")})}},{key:"getRandLetters",value:function(){for(var e=this.getOneRandomLetter(),t=this.getOneRandomLetter(),o=this.getOneRandomLetter(),n=Math.floor(3*Math.random()+1);t===e;)t=this.getOneRandomLetter();for(;o===e||o===t;)o=this.getOneRandomLetter();var r=e.toUpperCase(),i=t.toUpperCase(),a=o.toUpperCase();switch(n){case 1:n="top";break;case 2:n="middle";break;case 3:n="bottom"}var l=new Array;return l.top=r,l.middle=i,l.bottom=a,l.selection=n,l}},{key:"getOneRandomLetter",value:function(){return String.fromCharCode(Math.floor(25*Math.random())+97)}},{key:"evaluateClick",value:function(e,t){var o=new Audio("./audio/Good_job.mp3"),n=new Audio("./audio/Please_try_again.mp3"),r=e.selection,i=this.shadowRoot.querySelector("#topcard"),a=this.shadowRoot.querySelector("#middlecard"),l=this.shadowRoot.querySelector("#bottomcard");if(t===r)switch(o.play(),t){case"top":i.setAttribute("cardcolor","#00ff00");break;case"middle":a.setAttribute("cardcolor","#00ff00");break;case"bottom":l.setAttribute("cardcolor","#00ff00")}else switch(n.play(),t){case"top":i.setAttribute("cardcolor","#ff0000");break;case"middle":a.setAttribute("cardcolor","#ff0000");break;case"bottom":l.setAttribute("cardcolor","#ff0000")}}}]),t}();customElements.define("alphabet-home",AlphabetHome);